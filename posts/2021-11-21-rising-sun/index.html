<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Rising sun - Nothing to see here</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Recently my interest in the Go programming language changed from dormant back to active. Being a .NET developer by day and frankly getting new feature fatigue. I was drawn to a simpler world. I studied Go in the past using e.g. exercism and watching every Rob Pike youtube video I could find. I brushed up on what I learned before and found that with the introduction of Go modules, life improved quite a bit."><meta property="og:image" content><meta property="og:title" content="Rising sun"><meta property="og:description" content="Recently my interest in the Go programming language changed from dormant back to active. Being a .NET developer by day and frankly getting new feature fatigue. I was drawn to a simpler world. I studied Go in the past using e.g. exercism and watching every Rob Pike youtube video I could find. I brushed up on what I learned before and found that with the introduction of Go modules, life improved quite a bit."><meta property="og:type" content="article"><meta property="og:url" content="http://basbossink.github.io/posts/2021-11-21-rising-sun/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-11-21T00:00:00+00:00"><meta property="article:modified_time" content="2021-11-21T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Rising sun"><meta name=twitter:description content="Recently my interest in the Go programming language changed from dormant back to active. Being a .NET developer by day and frankly getting new feature fatigue. I was drawn to a simpler world. I studied Go in the past using e.g. exercism and watching every Rob Pike youtube video I could find. I brushed up on what I learned before and found that with the introduction of Go modules, life improved quite a bit."><script src=http://basbossink.github.io/js/feather.min.js></script>
<link href=http://basbossink.github.io/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=http://basbossink.github.io/css/main.40ca3a860425083862b7ebd55447caec5c4384573f0cb098b8d06a91e8dace2e.css><link id=darkModeStyle rel=stylesheet type=text/css href=http://basbossink.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css><link rel=stylesheet type=text/css href=http://basbossink.github.io/css/overrides.c755da9dccb0cb7240fb81a9a5f7b0962c285b8f6c9bcce5b2e7fa691de6a58b.css></head><body><div class=content><header><div class=main><a href=http://basbossink.github.io/>Nothing to see here</a></div><nav><a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/projects>Projects</a>
<a href=/about>About</a></nav></header><main><article><div class=title><h1 class=title>Rising sun</h1><div class=meta>Posted on Nov 21, 2021</div></div><section class=body><p>Recently my interest in the <a href=https://golang.org/>Go</a> programming language changed from dormant back to active. Being a <a href=https://dotnet.microsoft.com/>.NET</a> developer by day and frankly getting new feature fatigue. I was drawn to a simpler world. I studied Go in the past using e.g. <a href=https://exercism.org/>exercism</a> and watching every <a href="https://www.youtube.com/results?search_query=rob+pike+golang">Rob Pike youtube video</a> I could find. I brushed up on what I learned before and found that with the introduction of Go <a href=https://golang.org/doc/#developing-modules>modules</a>, life improved quite a bit. I was lucky to find the fantastic <a href=https://www.youtube.com/c/JustForFunc>Just for func youtube channel</a>, that really helped me to learn more about the practicalities of writing Go code.</p><h2 id=the-likes>The likes</h2><p>I started by writing a really small stub implementation of a <a href=https://en.wikipedia.org/wiki/SOAP>SOAP</a> service at work. This was really easy given the excellent support for HTTP in the <a href=https://pkg.go.dev/net/http>net/http</a> package and <a href=https://www.telerik.com/fiddler>Fiddler</a>. My routine was,</p><ul><li>detect what calls to the service were being made,</li><li>grab the response body using Fiddler,</li><li>reformat it,</li><li>paste it into the Go code,</li><li>check if some part of the response needed to be parameterized,</li><li>if so add some <code>%s</code> directives and use <code>fmt.Fprintf</code> instead of <code>fmt.Printf</code> to write to the response.</li></ul><p>I especially appreciated that the standard library fills the HTTP <code>Content-Type</code> header correctly based on the content written to the writer.</p><h2 id=inception>Inception</h2><p>With this positive experience behind me, I was trying to find a next project to work on. Recently I was experimenting with moving my work tracking/todo list management setup from <a href=https://orgmode.org/>Emacs Org-Mode</a> to <a href=https://taskwarrior.org/>Taskwarrior</a>. What I was missing was the ability to make brief notes about activities that were not planned or part of my todo list but that I do anyway. Think of things like helping a coworker with some problem they are having, or e.g. responding to an email from a customer. I&rsquo;m aware of the <a href=https://taskwarrior.org/docs/commands/log.html><code>log</code></a> command of taskwarrior but I felt these smallish items should not pollute my task list. I tried <a href=https://github.com/klaussinani/taskbook>taskbook</a> to fill in this gap but wasn&rsquo;t happy with it. So what else to do but to write something really simple myself. This marked the birth of <a href=https://stand-up-notes.org>sun</a>.</p><h2 id=design>Design</h2><p>One key feature I wanted to implement was that notes would only be shown of the recent past. Next to that sun should be fast and perform in constant time. Another restriction I put on myself was to only use the Go standard library. Once I looked at the different options in the <a href=https://pkg.go.dev/encoding>encoding</a> package. I decided to use <a href=https://pkg.go.dev/encoding/gob>encoding/gob</a> and <a href=https://pkg.go.dev/encoding/binary>encoding/binary</a> in conjunction to be able to read the data file starting at the end. The file layout is explained in the picture below, courtesy of the excellent <a href=https://github.com/ivanceras/svgbob>svgbob</a> application.</p><p><img src=https://stand-up-notes.org/diag-d5114b597967979fdc5fe4880f64ae82.svg alt="sun file layout"></p><p>This layout has two main advantages it is simple to write when appending a new entry to the file and it can be read in reverse from the end of the file in a straightforward manner.</p><h2 id=implementation>Implementation</h2><p>The implementation of the reading and writing of the data was done quickly. The rest of the application was a lot of getting used to how error handling is done in Go. Having played with languages such as <a href=https://rust-lang.org/>Rust</a>, the Go usage of errors is still something I struggle with. Being a fan of small functions I found it hard to choose the correct function size in Go without <em>duplicating</em> the error handling on multiple levels.</p><h2 id=following-through>Following through</h2><p>My GitHub account currently counts a large number of dreams/ideas and someday maybes. What made this project different was that I wanted the functionality for my daily work and it was small and simple enough that I could implement it in a limited amount of time. I was also very pleased to have found <a href=https://asciidoctor.org/>Asciidoctor</a> which allowed me to have a <code>README</code> file that is presented on GitHub nicely, which can be transformed into a simple website easily. Asciidoctor also supports <a href=https://docs.asciidoctor.org/asciidoc/latest/directives/conditionals/>conditionals</a>, which makes it possible to include parts of the document only when processed by GitHub for instance. A few clicks on <a href=https://netlify.com/>Netlify</a> and a deployment one-liner and Bob&rsquo;s your uncle. The fact that Go makes cross-compilation so easy and some <a href=https://github.com/basbossink/sun/blob/main/release.sh>shell scripting</a> made it easy to publish a release to GitHub semi-automatically. Since I don&rsquo;t expect to add any features to sun trying to fully automate the release process seems overkill.</p><h2 id=in-conclusion>In conclusion</h2><p>I had some real fun implementing sun and learning a lot about Go in the process. Have a look at the code on <a href=https://github.com/basbossink/sun>GitHub</a> if your interested. If you have any suggestions about possible improvements for the code please let me know, I&rsquo;m eager to learn. I hope this very small utility provides some value to others, üôè.</p></section><div class=post-tags></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/basbossink/ title=GitHub><i data-feather=github></i></a><a class=soc href=https://twitter.com/basbossink/ title=Twitter><i data-feather=twitter></i></a></div><div class=footer-info>2022 ¬© Bas Bossink | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script>feather.replace()</script></div></body></html>